"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[559],{5559:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var r=t(1413),i=t(9439),a=t(2791),c=t(7491),o=t(364),l=t(9930),s=t(2425),d=t(3099),u=t(7309),m=t(8183),h=t(7545),f=t(174),p=t(6263),g=t.n(p),x=t(1730),Z=t(4057),j=t(1752),v=t(2622),w=t(5861),y=t(3433),b=t(7757),S=t.n(b),k=t(2949),C=t(3695),F=t(5064),I=t(2351),E=t(281),_=t(4569),L=t.n(_),T=t(184),P=function(e){var n=e.onFinish,t=e.form,r=e.idEdit,c=s.Z.TextArea,d=k.Z.Option,m=(0,o.useDispatch)(),h=(0,o.useSelector)((function(e){return e.ecommerceReducer})).ecommercelist,f=(0,a.useState)(!1),p=(0,i.Z)(f,2),g=(p[0],p[1],(0,a.useState)(!1)),x=(0,i.Z)(g,2),Z=(x[0],x[1],(0,a.useState)([])),j=(0,i.Z)(Z,2),v=j[0],b=j[1];console.log(v),(0,a.useEffect)((function(){m((0,E.A4)())}),[]);var _=(0,a.useState)(!1),P=(0,i.Z)(_,2),R=(P[0],P[1],(0,a.useState)("")),V=(0,i.Z)(R,2);V[0],V[1];(0,a.useEffect)((function(){if(r){var e=t.getFieldValue("image");b(e),console.log(e)}}),[t,r]);var D=function(){var e=(0,w.Z)(S().mark((function e(n){var t,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.url){e.next=5;break}return e.next=4,new Promise((function(e){var t=new FileReader;t.readAsDataURL(n.originFileObj),t.onload=function(){return e(t.result)}}));case 4:t=e.sent;case 5:(r=new Image).src=t,window.open(t).document.write(r.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,T.jsx)("div",{children:(0,T.jsxs)(l.Z,{className:"ecommerce-form",validateMessages:{required:"Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng !",types:{string:"${label} kh\xf4ng h\u1ee3p l\u1ec7 !",number:"${label} kh\xf4ng h\u1ee3p l\u1ec7 !"},string:{max:"${label} t\u1ed1i \u0111a 255 k\xfd t\u1ef1 !"},number:{range:"${label} trong kho\u1ea3ng 1-100 !"},pattern:{mismatch:"${label} kh\xf4ng h\u1ee3p l\u1ec7 !"}},onFinish:n,form:t,children:[r&&(0,T.jsx)(l.Z.Item,{name:"id",hidden:!0,children:(0,T.jsx)(s.Z,{})}),(0,T.jsx)(l.Z.Item,{name:"name",label:"T\xean",required:!0,rules:[{required:!0,whitespace:!0},{type:"string",max:255}],style:{width:"50%",paddingRight:"10px"},children:(0,T.jsx)(s.Z,{placeholder:"V\xed d\u1ee5: Eplaza"})}),(0,T.jsx)(l.Z.Item,{name:"des",label:"Description",required:!0,rules:[{required:!0},{type:"string",max:255}],style:{width:"50%",paddingRight:"10px"},children:(0,T.jsx)(c,{})}),(0,T.jsx)(l.Z.Item,{name:"ecommerce_id",label:"EcommerceId",required:!0,rules:[{required:!0}],style:{width:"50%",paddingRight:"10px"},children:(0,T.jsx)(k.Z,{showSearch:!0,style:{width:200},placeholder:"EcommerceId",optionFilterProp:"children",filterOption:function(e,n){return n.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,n){return e.children.toLowerCase().localeCompare(n.children.toLowerCase())},children:h.map((function(e,n){return(0,T.jsx)(d,{value:e.id,children:e.name},n)}))})}),(0,T.jsxs)(l.Z.Item,{name:"image_url",label:"\u1ea2nh tin t\u1ee9c",valuePropName:"file",getValueFromEvent:function(e){return e&&e.file},style:{width:"50%",paddingRight:"10px"},children:[(0,T.jsx)(F.Z,{listType:"picture-card",name:"files",beforeUpload:function(e){return b([].concat((0,y.Z)(v),[e])),!1},fileList:v,onChange:function(e){var n=e.fileList;b(n)},onPreview:D,children:"+ Upload"}),(0,T.jsx)("br",{}),(0,T.jsx)(u.Z,{icon:(0,T.jsx)(I.Z,{}),disabled:0==v,onClick:function(){var e=new FormData;v.forEach((function(n){e.append("files",new Blob([n]),n.name)})),L().post("".concat("http://103.9.159.151:22297","/upload/upload-array"),e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log("cc",e)," "!==e.data.url&&"UPLOAD_SUCCESS"==e.data.message?(t.setFieldsValue({image:e.data.url}),C.ZP.success("upload th\xe0nh c\xf4ng")):C.ZP.error("M\u1eddi th\xeam d\u1eef li\u1ec7u")})).catch((function(e){t.setFieldsValue({image:" "}),C.ZP.error("upload th\u1ea5t b\u1ea1i",e)}))},children:"Upload"})]}),(0,T.jsx)(l.Z.Item,{name:"image",hidden:!0,children:(0,T.jsx)(s.Z,{})}),(0,T.jsx)(l.Z.Item,{style:{width:"90%"}}),(0,T.jsx)(l.Z.Item,{className:"button",children:(0,T.jsx)(u.Z,{htmlType:"submit",type:"primary",children:"L\u01b0u l\u1ea1i"})})]})})},R=function(){var e=(0,o.useSelector)((function(e){return e.brandReducer})),n=e.brandlist,t=e.loadingbrand;console.log(n);var p=(0,o.useDispatch)();(0,a.useEffect)((function(){p((0,c._3)())}),[p]);var w=(0,a.useState)(""),y=(0,i.Z)(w,2),b=y[0],S=y[1],k=(0,a.useState)(""),C=(0,i.Z)(k,2),F=C[0],I=C[1],E=(0,a.useState)(!1),_=(0,i.Z)(E,2),L=_[0],R=_[1],V=(0,a.useState)(!1),D=(0,i.Z)(V,2),N=D[0],z=D[1],O=(0,a.useState)(0),q=(0,i.Z)(O,2),B=q[0],U=q[1],A=l.Z.useForm(),H=(0,i.Z)(A,1)[0],M=l.Z.useForm(),$=(0,i.Z)(M,1)[0],K=function(e){return{filterDropdown:function(n){var t=n.setSelectedKeys,r=n.selectedKeys,i=n.confirm,a=n.clearFilters;return(0,T.jsxs)("div",{style:{padding:12},children:[(0,T.jsx)(s.Z,{placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:function(){return W(r,i,e)},style:{marginBottom:8,display:"block"}}),(0,T.jsxs)(d.Z,{children:[(0,T.jsx)(u.Z,{type:"primary",onClick:function(){return W(r,i,e)},icon:(0,T.jsx)(x.Z,{}),size:"small",style:{width:90},children:"Search"}),(0,T.jsx)(u.Z,{onClick:function(){return X(a)},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return(0,T.jsx)(x.Z,{style:{color:e?"#1890ff":void 0}})},onFilter:function(n,t){return t[e]?t[e].toString().toLowerCase().includes(n.toLowerCase()):""},render:function(n){return F===e?(0,T.jsx)(g(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[b],autoEscape:!0,textToHighlight:n?n.toString():""}):"ecommerce"===e?null===n||void 0===n?void 0:n.name:n}}},W=function(e,n,t){n(),S(e[0]),I(t)},X=function(e){e(),S("")},G=[(0,r.Z)({title:"Name",dataIndex:"name",key:"Name",width:"20%"},K("name")),{title:"Image",dataIndex:"image_url",key:"image_url",width:"5%",render:function(e){return(0,T.jsx)("img",{src:(n=e,null===n?void 0:"http://103.9.159.151:22297"+n[0].url),style:{width:"100%",height:"100%"},alt:""});var n}},(0,r.Z)({title:"Description",dataIndex:"des",key:"des",width:"20%"},K("des")),(0,r.Z)({title:"EcommerceId",dataIndex:"ecommerce",key:"ecommerce",width:"20%",sorter:function(e,n){return e.ecommerce-n.ecommerce},sortDirections:["descend","ascend"]},K("ecommerce")),{key:"Action",title:(0,T.jsx)(Z.Z,{onClick:function(){return p((0,c._3)())}}),align:"center",width:"10%",render:function(e,n,t){return(0,T.jsxs)(d.Z,{size:"middle",children:[(0,T.jsx)(j.Z,{style:{color:"blue"},onClick:function(){return J(n)}}),(0,T.jsx)(m.Z,{placement:"bottomRight",title:"B\u1ea1n mu\u1ed1n x\xf3a ".concat(n.name," ?"),onConfirm:function(){return Q(n.id)},okText:"X\xf3a",cancelText:"H\u1ee7y",children:(0,T.jsx)(v.Z,{style:{color:"red"}})})]})}}],J=(0,a.useCallback)((function(e){var n={id:e.id,name:e.name,des:e.des,ecommerce_id:e.ecommerce.id,image:e.image_url};$.setFieldsValue(n),U(e.id),z(!0)}),[$]),Q=function(e){p((0,c.HV)(e))};return(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"addecommerce",children:(0,T.jsx)(u.Z,{type:"primary",onClick:function(){return R(!0)},children:"Th\xeam Brand"})}),(0,T.jsx)("br",{}),(0,T.jsx)(h.Z,{className:"modal-add",title:"Th\xeam Brand",visible:L,footer:"",centered:!0,onCancel:function(){return R(!1)},children:(0,T.jsx)(P,{onFinish:function(e){var n={name:e.name,des:e.des,ecommerce_id:e.ecommerce_id,image_url:e.image};p((0,c.Aw)(n)),R(!1),H.resetFields(),console.log(n)},form:H})}),(0,T.jsx)(h.Z,{className:"modal-edit",title:"S\u1eeda Brand",visible:N,onCancel:function(){return z(!1)},centered:!0,footer:"",children:(0,T.jsx)(P,{onFinish:function(e){var n={id:e.id,name:e.name,description:e.des,ecommerce_id:e.ecommerce_id,image_url:e.image};p((0,c.xT)(n)),z(!1),H.resetFields(),console.log(n)},form:$,idEdit:B})}),(0,T.jsx)(f.Z,{scroll:{x:900},pagination:{defaultCurrent:30,defaultPageSize:10,hideOnSinglePage:!0,pageSizeOptions:[10,30,50,100]},loading:t,columns:G,dataSource:n,rowKey:function(e){return e.id},bordered:!0})]})}},2351:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(1413),i=t(2791),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},c=t(4291),o=function(e,n){return i.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,icon:a}))};o.displayName="UploadOutlined";var l=i.forwardRef(o)}}]);
//# sourceMappingURL=559.17f97a40.chunk.js.map