{"version":3,"file":"static/js/610.2035b3fc.chunk.js","mappings":"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","sources":["Demo/Category/Voucher/voucherForm.js","Demo/Category/Voucher/voucher.js"],"sourcesContent":["import React from 'react'\r\nimport { Input, Button, Form, InputNumber, Switch, Upload, message,Select } from 'antd';\r\nimport { UploadOutlined, InboxOutlined, PlusOutlined, LoadingOutlined } from '@ant-design/icons';\r\nimport { ecommercegetAll } from '../../../store/Category/ecommerce';\r\nimport { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport './voucher.scss'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getUserFromLocalStorage } from '../../../helpers/common';\r\nimport { DatePicker, Space } from 'antd';\r\nimport moment from 'moment';\r\nimport axios from 'axios';\r\nimport locale_vi from 'antd/es/date-picker/locale/vi_VN';\r\nconst { RangePicker } = DatePicker;\r\n\r\nconst VoucherForm = ({ onFinish, form, idEdit }) => {\r\n    const datauser=getUserFromLocalStorage();\r\n    const { TextArea } = Input;\r\n    const { Dragger } = Upload;\r\n    const [loading, setLoading] = useState(false);\r\n    const [fileList, setFileList] = useState([]);\r\n    const [imageUrl, setImageUrl] = useState('');\r\n    const {Option}=Select;\r\n    const dispatch=useDispatch();\r\n    const {ecommercelist}=useSelector(state=>state.ecommerceReducer)\r\n\r\n\r\n  \r\n    const onChange = ({ fileList:newFileList }) => {\r\n        setFileList(newFileList);\r\n\r\n      };\r\n      function onOk(value) {\r\n        console.log('onOk: ', value);\r\n      }\r\n    useEffect(() => {\r\n    \r\n        dispatch(ecommercegetAll())\r\n    }, [])\r\n    const validateMessages = {\r\n        required: 'Không được để trống !',\r\n        types: {\r\n            string: '${label} không hợp lệ !',\r\n            number: '${label} không hợp lệ !',\r\n\r\n        },\r\n        string: {\r\n            max: '${label} tối đa 255 ký tự !',\r\n        },\r\n        number: {\r\n            range: '${label} trong khoảng 1-100 !',\r\n        },\r\n        pattern: {\r\n            mismatch: '${label} không hợp lệ !',\r\n        },\r\n    };\r\n\r\n\r\n \r\n   \r\n\r\n    const normContent = (value) => {\r\n        return value.text;\r\n    };\r\n    const normFile = (e) => {\r\n        return e && e.file;\r\n    };\r\n    return (\r\n        <div>\r\n            <Form className=\"ecommerce-form\" validateMessages={validateMessages} onFinish={onFinish} form={form} method='POST' encType='multipart/form-data' >\r\n                {\r\n                    idEdit &&\r\n                    <Form.Item name=\"id\" hidden={true}>\r\n                        <Input />\r\n                    </Form.Item>\r\n                }\r\n\r\n                <Form.Item name=\"name\" label=\"Tên\" required rules={[{ required: true, whitespace: true }, { type: 'string', max: 255 }]}\r\n                    style={{ width: '50%', paddingRight: \"10px\" }}>\r\n                    <Input placeholder=\"Ví dụ: Eplaza\" />\r\n                </Form.Item>\r\n                <Form.Item name=\"decrease_percent\" label=\"decrease_percent\" required rules={[{ required: true}]}\r\n                    style={{ width: '50%', paddingRight: \"10px\" }}>\r\n                    <Input placeholder=\"Ví dụ:10.000$\" />\r\n                </Form.Item>\r\n                <Form.Item name=\"decrease_price\" label=\"decrease_price\" required rules={[{ required: true }]}\r\n                    style={{ width: '50%', paddingRight: \"10px\" }}>\r\n                    <Input placeholder=\"Ví dụ: 20\" />\r\n                </Form.Item>\r\n                {/* <Form.Item name=\"total_available\" label=\"total_available\" required rules={[{ required: true, whitespace: true }, { type: 'string', max: 255 }]}\r\n                    style={{ width: '50%', paddingRight: \"10px\" }}>\r\n                    <Input placeholder=\"Ví dụ: 20\" />\r\n                </Form.Item> */}\r\n                <Form.Item name=\"max_decrease_price\" label=\"max_decrease_price\" required rules={[{ required: true }]}\r\n                    style={{ width: '50%', paddingRight: \"10px\" }}>\r\n                    <Input placeholder=\"Ví dụ: 20\" />\r\n                </Form.Item>\r\n                <Form.Item name=\"voucher_type\" label=\"Type\" required rules={[{ required: true }]}\r\n                    style={{ width: '50%',paddingRight: \"10px\"  }}>\r\n                    <Select\r\n                       \r\n                        showSearch\r\n                        style={{ width: \"100%\" }}\r\n                        placeholder=\"type\"\r\n                        optionFilterProp=\"children\"\r\n                        filterOption={(input, option) =>\r\n                            option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                        }\r\n                        filterSort={(optionA, optionB) =>\r\n                            optionA.children.toLowerCase().localeCompare(optionB.children.toLowerCase())\r\n                        }>\r\n                        <Option value={1}>Hoạt Động</Option>\r\n                        <Option value={0}>Tạm Dừng</Option>\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item name=\"date\" label=\"Date\" \r\n                    style={{ width: '50%', paddingRight: \"10px\" }}>\r\n                   \r\n                   \r\n                   <DatePicker renderExtraFooter={() => ''}\r\n                   format=\"HH:mm:ss DD-MM-YYYY\"\r\n                   showTime />\r\n                   \r\n                </Form.Item>\r\n\r\n                <Form.Item name=\"des\" label=\"Description\" required rules={[{ required: true }, { type: 'string'}]}\r\n                    style={{ width: '50%', paddingRight: \"10px\" }}>\r\n                    <TextArea></TextArea>\r\n                </Form.Item>\r\n             <Form.Item name=\"ecommerce_id\" label=\"EcommerceId\" required rules={[{ required: true }]}\r\n                    style={{ width: '50%', paddingRight: \"10px\"  }}>\r\n                    <Select\r\n                       \r\n                        showSearch\r\n                        style={{ width: 200 }}\r\n                        placeholder=\"EcommerceId\"\r\n                        optionFilterProp=\"children\"\r\n                        filterOption={(input, option) =>\r\n                            option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n                        }\r\n                        filterSort={(optionA, optionB) =>\r\n                            optionA.children.toLowerCase().localeCompare(optionB.children.toLowerCase())\r\n                        }>\r\n                      \r\n\r\n                        {ecommercelist.map((x,index)=>(\r\n                            <Option key={index} value={x.id} >{x.name}</Option>\r\n                        ))}\r\n                        \r\n                       \r\n                    </Select>\r\n                </Form.Item>\r\n           \r\n   \r\n                <Form.Item name=\"image\" hidden={true}>\r\n                    <Input />\r\n                </Form.Item>\r\n        \r\n                <Form.Item\r\n                    style={{ width: '90%' }}>\r\n\r\n                </Form.Item>\r\n                <Form.Item className='button'>\r\n                    <Button htmlType=\"submit\" type=\"primary \" >Lưu lại</Button>\r\n                </Form.Item>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default VoucherForm;\r\n","import React, { useCallback } from 'react'\r\nimport { voucherAdd, voucherEdit, voucherDelete, vouchergetAll } from '../../../store/Category/vouchers';\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button, Form, Modal, Space, Table, Popconfirm, Tag, Input } from 'antd';\r\nimport Highlighter from 'react-highlight-words';\r\nimport { Pagination } from 'antd';\r\nimport { SearchOutlined, SyncOutlined, EditOutlined, DeleteOutlined, PlusOutlined,LoadingOutlined } from '@ant-design/icons';\r\nimport VoucherForm from './voucherForm';\r\nimport moment from 'moment';\r\nimport './voucher.scss'\r\n\r\nconst Voucher = () => {\r\n\r\n  \r\n  const { voucherlist, loadingvoucher } = useSelector(state => state.voucherReducer)\r\n \r\n\r\n\r\n  const dispatch = useDispatch();\r\n  \r\n  useEffect(() => {\r\n    dispatch(vouchergetAll())\r\n  }, [dispatch])\r\n  const checkstart=(data)=>{\r\nif(data==null){\r\n  return\r\n}else{\r\n  return data[0]\r\n}\r\n  }\r\n  const [searchText, setsearchText] = useState('');\r\n  const [searchedColumn, setSearchedColumn] = useState('');\r\n  const [idEdit,setIdEdit]=useState(0);\r\n  //modal\r\n  const [isModalAdd, setIsModalAdd] = useState(false);\r\n  const [isModalEdit, setIsModalEdit] = useState(false);\r\n  const [formAdd] = Form.useForm();    \r\n  const [formEdit] = Form.useForm();\r\n  const checkimage=(img)=>{\r\nif(img==null){\r\n  return\r\n}else{\r\n  return process.env.REACT_APP_API_URL + img[0].url\r\n}\r\n\r\n  }\r\n  \r\n  const getColumnSearchProps = dataIndex => ({\r\n    filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\r\n      <div style={{ padding: 12 }}>\r\n        <Input\r\n          placeholder={`Search ${dataIndex}`}\r\n          value={selectedKeys[0]}\r\n          onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\r\n          onPressEnter={() => handleSearch(selectedKeys, confirm, dataIndex)}\r\n          style={{ marginBottom: 8, display: 'block' }}\r\n        />\r\n        <Space>\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={() => handleSearch(selectedKeys, confirm, dataIndex)}\r\n            icon={<SearchOutlined />}\r\n            size=\"small\"\r\n            style={{ width: 90 }}\r\n          >\r\n            Search\r\n          </Button>\r\n          <Button onClick={() => handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\r\n            Reset\r\n          </Button>\r\n        </Space>\r\n      </div>\r\n    ),\r\n    filterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\r\n    onFilter: (value, record) =>\r\n      record[dataIndex]\r\n        ? record[dataIndex].toString().toLowerCase().includes(value.toLowerCase())\r\n        : '',\r\n\r\n\r\n    render: text =>{\r\n      if( searchedColumn === dataIndex ){\r\n        return     <Highlighter\r\n        highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\r\n        searchWords={[searchText]}\r\n        autoEscape\r\n        textToHighlight={text ? text.toString() : ''}\r\n      />\r\n      }else{\r\n        if(dataIndex==='ecommerce'){\r\n          return text?.name\r\n        }\r\n        return text;\r\n      }\r\n    }\r\n\r\n     \r\n  });\r\n\r\n  const handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n\r\n    confirm();\r\n    setsearchText(selectedKeys[0]);\r\n    setSearchedColumn(dataIndex);\r\n\r\n  };\r\n  const handleReset = clearFilters => {\r\n    clearFilters();\r\n    setsearchText('')\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      width: '20%',\r\n      ...getColumnSearchProps('name'),\r\n    },\r\n\r\n\r\n    {\r\n      title: 'decrease_price',\r\n      dataIndex: 'decrease_price',\r\n      key: 'decrease_price',\r\n      width: '20%',\r\n      sorter: (a, b) => a.decrease_price - b.decrease_price,\r\n      sortDirections: ['descend', 'ascend'],\r\n      ...getColumnSearchProps('decrease_price'),\r\n    },\r\n    {\r\n        title: 'decrease_percent',\r\n        dataIndex: 'decrease_percent',\r\n        key: 'decrease_percent',\r\n        width: '20%',\r\n        sorter: (a, b) => a.decrease_percent - b.decrease_percent,\r\n        sortDirections: ['descend', 'ascend'],\r\n        ...getColumnSearchProps('decrease_percent'),\r\n      },\r\n      {\r\n        title: 'max_decrease_price',\r\n        dataIndex: 'max_decrease_price',\r\n        key: 'max_decrease_price',\r\n        width: '20%',\r\n        sorter: (a, b) => a.max_decrease_price - b.max_decrease_price,\r\n        sortDirections: ['descend', 'ascend'],\r\n        ...getColumnSearchProps('max_decrease_price'),\r\n      },\r\n    {\r\n      title: 'created_date',\r\n      dataIndex: 'created_date',\r\n      key: 'created_date',\r\n      width: '20%',\r\n      sorter: (a, b) => a.created_date - b.created_date,\r\n      sortDirections: ['descend', 'ascend'],\r\n      ...getColumnSearchProps('created_date'),\r\n    },\r\n  \r\n\r\n    {\r\n      title: 'EcomerceId',\r\n      dataIndex: 'ecommerce',\r\n      key: 'ecommerce',\r\n      width: '20%',\r\n      ...getColumnSearchProps('ecommerce'),\r\n      sorter: (a, b) => a.ecommerce.length - b.ecommerce.length,\r\n      sortDirections: ['descend', 'ascend'],\r\n    },\r\n    {\r\n      title: 'Description',\r\n      dataIndex: 'des',\r\n      key: 'des',\r\n      width: '20%',\r\n      ...getColumnSearchProps('des'),\r\n    },\r\n    {\r\n      key: 'Action',\r\n      title: <SyncOutlined onClick={() => dispatch(vouchergetAll())} />,\r\n      align: 'center',\r\n      width: '10%',\r\n      render: (text, record, index) => (\r\n        <Space size=\"middle\">\r\n          <EditOutlined style={{ color: \"blue\" }} onClick={() => handleEditForm(record)} />\r\n          <Popconfirm\r\n            placement=\"bottomRight\"\r\n            title={`Bạn muốn xóa ${record.name} ?`}\r\n            onConfirm={() => handleDelete(record.id)}\r\n            okText=\"Xóa\"\r\n        \r\n            cancelText=\"Hủy\"\r\n          >\r\n            <DeleteOutlined style={{ color: \"red\" }} />\r\n          </Popconfirm>\r\n        </Space>\r\n      ),\r\n\r\n    },\r\n  ];\r\n  // actionform\r\n  const onFinishAdd = (values) => {\r\n   \r\n   const dataNews = {\r\n    name: values.name,\r\n   decrease_percent: values.decrease_percent,\r\n   decrease_price:values.decrease_price,\r\n   ecommerce_id: values.ecommerce_id,\r\n   des: values.des,\r\n   max_decrease_price: values.max_decrease_price,\r\n   created_date: values.date,\r\n  \r\n   }\r\n  \r\n    dispatch(voucherAdd(dataNews))\r\n    formAdd.resetFields()\r\n    setIsModalAdd(false)\r\n    console.log(\"date555\",values.date)\r\nconsole.log(values)\r\n   }\r\n\r\n   const handleEditForm = (record) => {\r\n    const editform = {    \r\n      id: record.id,\r\n      name:record.name,\r\n      date: [moment(record.created_date,'HH-mm DD-MM-YYYY'),moment(record.updated_date,'HH-mm DD-MM-YYYY')],\r\n      decrease_price:record.decrease_price,\r\n      ecommerce_id: record.ecommerce.id,\r\n       max_decrease_price:record.max_decrease_price,\r\n        des: record.des,\r\n        decrease_percent:record.decrease_percent\r\n    }\r\n  \r\n    setIdEdit(record.id);\r\n    formEdit.setFieldsValue(editform)\r\n    setIsModalEdit(true)\r\n  }\r\n\r\n  const onFinishEdit = (values) => {\r\n    const edit = {\r\n    id:values.id,\r\n    name: values.name,\r\n    decrease_percent: values.decrease_percent,\r\n    decrease_price:values.decrease_price,\r\n    ecommerce_id: values.ecommerce_id,\r\n    des: values.des,\r\n    max_decrease_price: values.max_decrease_price,\r\n    created_date: values.date[0].format(\"HH:mm DD-MM-YYYY\"),\r\n    \r\n     }\r\n    \r\n    dispatch(voucherEdit(edit))\r\n    setIsModalEdit(false)   ;\r\n    console.log(edit);\r\n  }\r\n  const handleDelete = (id) => {\r\n    dispatch(voucherDelete(id))\r\n  }\r\n  return (\r\n    <div>\r\n      <div className='addecommerce' >\r\n        <Button type=\"primary\" onClick={() => \r\n         \r\n          setIsModalAdd(true)}>\r\n          Thêm Voucher\r\n        </Button>\r\n      </div>\r\n      <br />\r\n      <Modal className='modal-add' title=\"Thêm Voucher\" visible={isModalAdd} footer=\"\" centered onCancel={() => setIsModalAdd(false)}>\r\n        <VoucherForm\r\n          onFinish={onFinishAdd}\r\n          form={formAdd} />\r\n      </Modal>\r\n\r\n      <Modal className='modal-edit' title=\"Sửa Voucher\" visible={isModalEdit} onCancel={() => setIsModalEdit(false)} centered footer=\"\">\r\n        <VoucherForm\r\n          onFinish={onFinishEdit}\r\n          form={formEdit}      \r\n          idEdit={idEdit}     \r\n        />\r\n      </Modal>\r\n\r\n      <Table scroll={{ x: 900 }}\r\n       pagination= {{defaultCurrent:1,defaultPageSize:10,hideOnSinglePage:true,pageSizeOptions:[10,30,50,100]}}\r\n      loading={loadingvoucher} columns={columns} dataSource={voucherlist} rowKey={record => record.id} bordered />\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Voucher;\r\n"],"names":["DatePicker","onFinish","form","idEdit","TextArea","getUserFromLocalStorage","Input","Upload","useState","Option","Select","dispatch","useDispatch","ecommercelist","useSelector","state","ecommerceReducer","useEffect","ecommercegetAll","className","validateMessages","required","types","string","number","max","range","pattern","mismatch","method","encType","name","hidden","label","rules","whitespace","type","style","width","paddingRight","placeholder","showSearch","optionFilterProp","filterOption","input","option","children","toLowerCase","indexOf","filterSort","optionA","optionB","localeCompare","value","renderExtraFooter","format","showTime","map","x","index","id","htmlType","voucherReducer","voucherlist","loadingvoucher","vouchergetAll","searchText","setsearchText","searchedColumn","setSearchedColumn","setIdEdit","isModalAdd","setIsModalAdd","isModalEdit","setIsModalEdit","Form","formAdd","formEdit","getColumnSearchProps","dataIndex","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","onChange","e","target","onPressEnter","handleSearch","marginBottom","display","onClick","icon","SearchOutlined","size","handleReset","filterIcon","filtered","color","undefined","onFilter","record","toString","includes","render","text","highlightStyle","backgroundColor","searchWords","autoEscape","textToHighlight","columns","title","key","sorter","a","b","decrease_price","sortDirections","decrease_percent","max_decrease_price","created_date","ecommerce","length","SyncOutlined","align","EditOutlined","handleEditForm","placement","onConfirm","handleDelete","okText","cancelText","DeleteOutlined","editform","date","moment","updated_date","ecommerce_id","des","setFieldsValue","voucherDelete","visible","footer","centered","onCancel","values","dataNews","voucherAdd","resetFields","console","log","edit","voucherEdit","scroll","pagination","defaultCurrent","defaultPageSize","hideOnSinglePage","pageSizeOptions","loading","dataSource","rowKey","bordered"],"sourceRoot":""}