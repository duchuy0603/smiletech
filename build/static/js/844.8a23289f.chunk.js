"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[844],{3844:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var r=n(1413),i=n(9439),a=n(2791),o=n(8317),s=n(364),c=n(9930),d=n(2425),l=n(3099),m=n(7309),u=n(8183),h=n(7545),f=n(174),g=n(6263),p=n.n(g),x=n(1730),Z=n(4057),y=n(1752),v=n(2622),w=n(5861),j=n(3433),k=n(7757),Y=n.n(k),C=n(5064),b=n(2949),D=n(3695),S=n(2351),_=n(281),I=n(4354),T=n(3506),H=n(2426),F=n.n(H),M=n(4569),E=n.n(M),P=n(7462),L={locale:"vi_VN",today:"H\xf4m nay",now:"B\xe2y gi\u1edd",backToToday:"Tr\u1edf v\u1ec1 h\xf4m nay",ok:"Ok",clear:"X\xf3a",month:"Th\xe1ng",year:"N\u0103m",timeSelect:"Ch\u1ecdn th\u1eddi gian",dateSelect:"Ch\u1ecdn ng\xe0y",weekSelect:"Ch\u1ecdn tu\u1ea7n",monthSelect:"Ch\u1ecdn th\xe1ng",yearSelect:"Ch\u1ecdn n\u0103m",decadeSelect:"Ch\u1ecdn th\u1eadp k\u1ef7",yearFormat:"YYYY",dateFormat:"D/M/YYYY",dayFormat:"D",dateTimeFormat:"D/M/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Th\xe1ng tr\u01b0\u1edbc (PageUp)",nextMonth:"Th\xe1ng sau (PageDown)",previousYear:"N\u0103m tr\u01b0\u1edbc (Control + left)",nextYear:"N\u0103m sau (Control + right)",previousDecade:"Th\u1eadp k\u1ef7 tr\u01b0\u1edbc",nextDecade:"Th\u1eadp k\u1ef7 sau",previousCentury:"Th\u1ebf k\u1ef7 tr\u01b0\u1edbc",nextCentury:"Th\u1ebf k\u1ef7 sau"},N={placeholder:"Ch\u1ecdn th\u1eddi gian"},R={lang:(0,P.Z)({placeholder:"Ch\u1ecdn th\u1eddi \u0111i\u1ec3m",rangePlaceholder:["Ng\xe0y b\u1eaft \u0111\u1ea7u","Ng\xe0y k\u1ebft th\xfac"]},L),timePickerLocale:(0,P.Z)({},N)},O=n(184),V=T.Z.RangePicker,q=function(e){var t=e.onFinish,n=e.form,r=e.idEdit,o=((0,I.nk)(),d.Z.TextArea),l=(C.Z.Dragger,(0,a.useState)(!1)),u=(0,i.Z)(l,2),h=(u[0],u[1],(0,a.useState)([])),f=(0,i.Z)(h,2),g=f[0],p=f[1],x=(0,a.useState)(""),Z=(0,i.Z)(x,2),y=(Z[0],Z[1]),v=b.Z.Option,k=(0,s.useDispatch)(),T=(0,s.useSelector)((function(e){return e.ecommerceReducer})).ecommercelist,H=function(e){var t=e.fileList;p(t)};(0,a.useEffect)((function(){k((0,_.A4)())}),[]);(0,a.useEffect)((function(){if(r){var e=n.getFieldValue("image");y(e),console.log(e)}}),[n,r]);var M=function(){var e=new FormData;g.forEach((function(t){e.append("files",new Blob([t]),t.name)})),E().post("".concat("http://103.9.159.151:22297","/upload/upload-array"),e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){"UPLOAD_SUCCESS"==e.data.message&&(n.setFieldsValue({image:e.data.url}),D.ZP.success("upload th\xe0nh c\xf4ng"))})).catch((function(e){n.setFieldsValue({image:" "}),D.ZP.error("upload th\u1ea5t b\u1ea1i",e)}))},P=function(){var e=(0,w.Z)(Y().mark((function e(t){var n,r;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url){e.next=5;break}return e.next=4,new Promise((function(e){var n=new FileReader;n.readAsDataURL(t.originFileObj),n.onload=function(){return e(n.result)}}));case 4:n=e.sent;case 5:(r=new Image).src=n,window.open(n).document.write(r.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,O.jsx)("div",{children:(0,O.jsxs)(c.Z,{className:"ecommerce-form",validateMessages:{required:"Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng !",types:{string:"${label} kh\xf4ng h\u1ee3p l\u1ec7 !",number:"${label} kh\xf4ng h\u1ee3p l\u1ec7 !"},string:{max:"${label} t\u1ed1i \u0111a 255 k\xfd t\u1ef1 !"},number:{range:"${label} trong kho\u1ea3ng 1-100 !"},pattern:{mismatch:"${label} kh\xf4ng h\u1ee3p l\u1ec7 !"}},onFinish:t,form:n,method:"POST",encType:"multipart/form-data",children:[r&&(0,O.jsx)(c.Z.Item,{name:"id",hidden:!0,children:(0,O.jsx)(d.Z,{})}),(0,O.jsx)(c.Z.Item,{name:"name",label:"T\xean",required:!0,rules:[{required:!0,whitespace:!0},{type:"string",max:255}],style:{width:"50%",paddingRight:"10px"},children:(0,O.jsx)(d.Z,{placeholder:"V\xed d\u1ee5: Eplaza"})}),(0,O.jsx)(c.Z.Item,{name:"cost",label:"Gi\xe1",required:!0,rules:[{required:!0}],style:{width:"50%",paddingRight:"10px"},children:(0,O.jsx)(d.Z,{placeholder:"V\xed d\u1ee5:10.000$"})}),(0,O.jsx)(c.Z.Item,{name:"address",label:"Address",required:!0,rules:[{required:!0,whitespace:!0},{type:"string",max:255}],style:{width:"50%",paddingRight:"10px"},children:(0,O.jsx)(d.Z,{placeholder:"V\xed d\u1ee5: 172a  yen lang"})}),(0,O.jsx)(c.Z.Item,{name:"date",label:"Date",style:{width:"50%",paddingRight:"10px"},children:(0,O.jsx)(V,{locale:R,disabledDate:function(e){return e&&e<F()().startOf("day")},showTime:{format:"HH:mm"},format:"HH:mm DD/MM/YYYY ",onChange:H,onOk:function(e){console.log("onOk: ",e)}})}),(0,O.jsx)(c.Z.Item,{name:"des",label:"Description",required:!0,rules:[{required:!0},{type:"string"}],style:{width:"50%",paddingRight:"10px"},children:(0,O.jsx)(o,{})}),(0,O.jsx)(c.Z.Item,{name:"ecommerce_id",label:"EcommerceId",required:!0,rules:[{required:!0}],style:{width:"50%",paddingRight:"10px"},children:(0,O.jsx)(b.Z,{showSearch:!0,style:{width:200},placeholder:"EcommerceId",optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},children:T.map((function(e,t){return(0,O.jsx)(v,{value:e.id,children:e.name},t)}))})}),(0,O.jsxs)(c.Z.Item,{name:"new_img",label:"\u1ea2nh tin t\u1ee9c",valuePropName:"file",getValueFromEvent:function(e){return e&&e.file},style:{width:"50%"},children:[(0,O.jsx)(C.Z,{listType:"picture-card",name:"files",beforeUpload:function(e){return p([].concat((0,j.Z)(g),[e])),!1},fileList:g,onChange:H,onPreview:P,children:"+ Upload"}),(0,O.jsx)("br",{}),(0,O.jsx)(m.Z,{icon:(0,O.jsx)(S.Z,{}),disabled:0==g,onClick:M,children:"Upload"})]}),(0,O.jsx)(c.Z.Item,{name:"image",hidden:!0,children:(0,O.jsx)(d.Z,{})}),(0,O.jsx)(c.Z.Item,{style:{width:"90%"}}),(0,O.jsx)(c.Z.Item,{className:"button",children:(0,O.jsx)(m.Z,{htmlType:"submit",type:"primary ",onClick:M,children:"L\u01b0u l\u1ea1i"})})]})})},z=function(){var e=(0,s.useSelector)((function(e){return e.eventsReducer})),t=e.eventslist,n=e.loadingevents,g=(0,s.useDispatch)();(0,a.useEffect)((function(){g((0,o.bf)())}),[g]);var w=(0,a.useState)(""),j=(0,i.Z)(w,2),k=j[0],Y=j[1],C=(0,a.useState)(""),b=(0,i.Z)(C,2),D=b[0],S=b[1],_=(0,a.useState)(0),I=(0,i.Z)(_,2),T=I[0],H=I[1],M=(0,a.useState)(!1),E=(0,i.Z)(M,2),P=E[0],L=E[1],N=(0,a.useState)(!1),R=(0,i.Z)(N,2),V=R[0],z=R[1],U=c.Z.useForm(),A=(0,i.Z)(U,1)[0],B=c.Z.useForm(),$=(0,i.Z)(B,1)[0],K=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,i=t.confirm,a=t.clearFilters;return(0,O.jsxs)("div",{style:{padding:12},children:[(0,O.jsx)(d.Z,{placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return W(r,i,e)},style:{marginBottom:8,display:"block"}}),(0,O.jsxs)(l.Z,{children:[(0,O.jsx)(m.Z,{type:"primary",onClick:function(){return W(r,i,e)},icon:(0,O.jsx)(x.Z,{}),size:"small",style:{width:90},children:"Search"}),(0,O.jsx)(m.Z,{onClick:function(){return X(a)},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return(0,O.jsx)(x.Z,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},render:function(t){return D===e?(0,O.jsx)(p(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[k],autoEscape:!0,textToHighlight:t?t.toString():""}):"ecommerce"===e?null===t||void 0===t?void 0:t.name:t}}},W=function(e,t,n){t(),Y(e[0]),S(n)},X=function(e){e(),Y("")},G=[(0,r.Z)({title:"Name",dataIndex:"name",key:"name",width:"20%"},K("name")),{title:"Image",dataIndex:"image_url",key:"Image",width:"12%",render:function(e){return(0,O.jsx)("img",{src:(t=e,null==t?void 0:"http://103.9.159.151:22297"+t[0].url),style:{width:"100%",height:"40%"},alt:""});var t}},(0,r.Z)({title:"Cost",dataIndex:"cost",key:"cost",width:"20%",sorter:function(e,t){return e.cost-t.cost},sortDirections:["descend","ascend"]},K("cost")),(0,r.Z)({title:"Address",dataIndex:"address",key:"address",width:"20%",sorter:function(e,t){return e.address-t.address},sortDirections:["descend","ascend"]},K("address")),(0,r.Z)({title:"start_time",dataIndex:"start_time",key:"start_time",width:"20%",sorter:function(e,t){return e.start_time-t.start_time},sortDirections:["descend","ascend"]},K("start_time")),(0,r.Z)({title:"end_time",dataIndex:"end_time",key:"end_time",width:"20%",sorter:function(e,t){return e.end_time-t.end_time},sortDirections:["descend","ascend"]},K("end_time")),(0,r.Z)((0,r.Z)({title:"EcomerceId",dataIndex:"ecommerce",key:"ecommerce",width:"20%"},K("ecommerce")),{},{sorter:function(e,t){return e.ecommerce.length-t.ecommerce.length},sortDirections:["descend","ascend"]}),(0,r.Z)({title:"Description",dataIndex:"des",key:"des",width:"20%"},K("des")),{key:"Action",title:(0,O.jsx)(Z.Z,{onClick:function(){return g((0,o.bf)())}}),align:"center",width:"10%",render:function(e,t,n){return(0,O.jsxs)(l.Z,{size:"middle",children:[(0,O.jsx)(y.Z,{style:{color:"blue"},onClick:function(){return J(t)}}),(0,O.jsx)(u.Z,{placement:"bottomRight",title:"B\u1ea1n mu\u1ed1n x\xf3a ".concat(t.name," ?"),onConfirm:function(){return Q(t.id)},okText:"X\xf3a",cancelText:"H\u1ee7y",children:(0,O.jsx)(v.Z,{style:{color:"red"}})})]})}}],J=function(e){var t={id:e.id,name:e.name,date:[F()(e.start_time,"HH-mm DD-MM-YYYY"),F()(e.end_time,"HH-mm DD-MM-YYYY")],address:e.address,ecommerce_id:e.ecommerce.id,cost:e.cost,des:e.des,image:e.image_url};H(e.id),$.setFieldsValue(t),z(!0)},Q=function(e){g((0,o.cI)(e))};return(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{className:"addecommerce",children:(0,O.jsx)(m.Z,{type:"primary",onClick:function(){return L(!0)},children:"Th\xeam Event"})}),(0,O.jsx)("br",{}),(0,O.jsx)(h.Z,{className:"modal-add",title:"Th\xeam Event",visible:P,footer:"",centered:!0,onCancel:function(){return L(!1)},children:(0,O.jsx)(q,{onFinish:function(e){var t={name:e.name,cost:e.cost,address:e.address,start_time:e.date[0].format("HH:mm DD-MM-YYYY"),end_time:e.date[1].format("HH:mm DD-MM-YYYY"),ecommerce_id:e.ecommerce_id,des:e.des,image_url:e.image};g((0,o.Zj)(t)),A.resetFields(),L(!1),console.log("date555",e.date),console.log(e)},form:A})}),(0,O.jsx)(h.Z,{className:"modal-edit",title:"S\u1eeda Event",visible:V,onCancel:function(){return z(!1)},centered:!0,footer:"",children:(0,O.jsx)(q,{onFinish:function(e){var t={id:e.id,name:e.name,cost:e.cost,address:e.address,start_time:e.date[0].format("HH:mm YYYY-MM-DD"),end_time:e.date[1].format("HH:mm YYYY-MM-DD"),ecommerce_id:e.ecommerce_id,des:e.des,image_url:e.image};g((0,o.wW)(t)),z(!1),console.log(t)},form:$,idEdit:T})}),(0,O.jsx)(f.Z,{scroll:{x:900},pagination:{defaultCurrent:1,defaultPageSize:10,hideOnSinglePage:!0,pageSizeOptions:[10,30,50,100]},loading:n,columns:G,dataSource:t,rowKey:function(e){return e.id},bordered:!0})]})}},2351:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(1413),i=n(2791),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},o=n(4291),s=function(e,t){return i.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};s.displayName="UploadOutlined";var c=i.forwardRef(s)}}]);
//# sourceMappingURL=844.8a23289f.chunk.js.map